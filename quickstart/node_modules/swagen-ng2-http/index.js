'use strict';

const modeMappings = {
    typescript: 'typescript',
    ts: 'typescript'
};

const supportedModes = [
    {
        name: 'typescript',
        description: 'Generates Typescript code',
        language: 'typescript'
    }
];

function generate(definition, profile) {
    let mode = modeMappings[profile.mode || 'typescript'];
    let Generator = require(`./lib/${mode}`);
    let generator = new Generator(definition, profile);
    return generator.generate();
}

function validate(profile) {
    let options = profile.options;
    if (!options) {
        throw `Specify an 'options' section in your profile.`;
    }
}

module.exports = {
    supportedModes: supportedModes,
    generate: generate,
    validateProfile: validate
};
